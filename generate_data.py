#!/usr/bin/env python3
# -*- coding: utf-8 -*-
from urllib import parse
import requests
from json import loads
geo_api_url = 'https://restapi.amap.com/v3/geocode/geo?key=be8762efdce0ddfbb9e2165a7cc776bd&s=rsv3&language=zh_cn&extensions=base&appname=https%3A%2F%2Fxg.hit.edu.cn%2Fzhxy-xgzs%2Fxg_mobile%2FxsMrsbNew&csid=47204181-378A-4F55-A94D-548A5BFD0DFD&sdkversion=1.4.16&address='
regeo_api_url = 'https://restapi.amap.com/v3/geocode/regeo?key=be8762efdce0ddfbb9e2165a7cc776bd&s=rsv3&language=zh_cn&extensions=base&appname=https%3A%2F%2Fxg.hit.edu.cn%2Fzhxy-xgzs%2Fxg_mobile%2FxsMrsbNew&csid=47204181-378A-4F55-A94D-548A5BFD0DFD&sdkversion=1.4.16&location='
# 125.136835,46.580384
addr = input('è¾“å…¥æ‚¨æ‰€åœ¨å…·ä½“ä½ç½®ï¼Œæ ¼å¼ï¼š(Xå›½)XXçœXXå¸‚XXåŒºXXXXï¼Œå¦‚é»‘é¾™æ±Ÿçœå“ˆå°”æ»¨å¸‚å—å²—åŒºå“ˆå°”æ»¨å·¥ä¸šå¤§å­¦\n')
addr = parse.quote(addr)
geo_response = requests.get(geo_api_url+addr)
location = geo_response.json()['geocodes'][0]['location']
addr_spl = location.split(',')
longitude, latitude = addr_spl[0], addr_spl[1]
regeo_response = requests.get(regeo_api_url+location)
geo_info = regeo_response.json()['regeocode']
addr = geo_info['formatted_address']
addr_component = geo_info['addressComponent']
province = addr_component['province']
city = addr_component['city']
district = addr_component['district']
street_number = addr_component['streetNumber']
street_number = street_number['street']+street_number['number']
post_data = '''
{
    // ç»å…¸ğŸ‚ğŸå¤–åŒ…é¡¹ç›®ï¼Œæ‹¼éŸ³+å¤©ä¹¦å‘½åå˜é‡ï¼Œæ²¡ğŸ
    "gpsjd": '''+str(longitude)+''', //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘ï¼Œç»åº¦ï¼Œä¸åŠ å¼•å·ï¼Œä¸­å›½åœ°åŒºéƒ½æ˜¯æ­£å®æ•°ã€‚
    "gpswd": '''+str(latitude)+''', //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘ï¼Œçº¬åº¦ï¼Œä¸åŠ å¼•å·ã€‚ä¸­å›½åœ°åŒºéƒ½æ˜¯æ­£å®æ•°ã€‚
    "jzdz": "", //å±…ä½åœ°å€ï¼Œä»…èµ°è¯»éœ€è¦å¡«å†™
    "kzl1": "1", //1-å›½å†…ï¼Œ0-å›½å¤–
    "kzl2": "", //å›½å¤–çš„å›½å®¶å’Œåœ°åŒº
    "kzl3": "", //å›½å¤–çš„åŸå¸‚
    "kzl4": "", //å›½å¤–å…·ä½“åœ°å€
    "kzl5": "", //æ˜¯å¦30æ—¥å†…å›å›½ï¼š0-å¦ï¼Œ1-æ˜¯ï¼Œæ­£å¸¸æ— éœ€å¡«å†™
    "kzl6": "'''+province+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘æ‰€åœ¨çœ
    "kzl7": "'''+city+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘æ‰€åœ¨å¸‚
    "kzl8": "'''+district+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘æ‰€åœ¨åŒº
    "kzl9": "'''+street_number+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘æ‰€åœ¨è¡—é“+é—¨ç‰Œå·
    "kzl10": "'''+addr+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘å…·ä½“åœ°å€
    "kzl11": "", //ä¸ä¸Šæ¬¡å®šä½åœ¨ä¸åŒåŸå¸‚çš„åŸå› ï¼›0-æ¢äº²ï¼Œ1-æ—…æ¸¸ï¼Œ2-å›å®¶ï¼Œ3-å‡ºå·®å®ä¹ ï¼›4-å…¶å®ƒ
    "kzl12": "", //å…·ä½“åŸå› 
    "kzl13": "0", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘å½“å‰åœ°åŒºé£é™©ç­‰çº§0-ä½ï¼Œ1-ä¸­ï¼Œ2-é«˜
    "kzl14": "", //æ‰€å¤„ä¸­/é«˜é£é™©åœ°åŒºæ‰€åœ¨è¡—é“ï¼Œç¤¾åŒºåç§°
    "kzl15": "0", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘å½“æ—¥æ˜¯å¦é€”å¾„ä¸­é«˜é£é™©åœ°åŒº0-å¦ï¼Œ1-æ˜¯
    "kzl16": "", //é€”å¾„ä¸­/é«˜é£é™©åœ°åŒºæ‰€åœ¨è¡—é“ï¼Œç¤¾åŒºåç§°
    "kzl17": "1", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘ä»Šæ—¥ä½“æ¸©0-ä¸æ­£å¸¸ï¼Œ1-æ­£å¸¸
    "kzl18": "0;", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘ä»Šæ—¥æ˜¯å¦å‡ºç°ä¸é€‚ï¼ˆå¤šé€‰ï¼‰ï¼Œ0-æ— ä¸é€‚ï¼Œ1-ä¹åŠ›ï¼Œ2-å¹²å’³ï¼Œ3-å‘¼å¸å›°éš¾ï¼Œ4-å…¶å®ƒ
    "kzl19": "", //æ˜¯å¦åˆ°ç›¸å…³åŒ»é™¢æˆ–é—¨è¯Šæ£€æŸ¥
    "kzl20": "", //æ£€æŸ¥ç»“æœï¼Œ0-ç–‘ä¼¼ï¼Œ1-ç¡®è¯Šï¼Œ2-å…¶å®ƒ
    "kzl21": "", //è‡ªè¡Œé‡‡å–çš„æ•‘æŠ¤æªæ–½ï¼Œ0-æœè¯ï¼Œ1-æœªæœè¯ï¼Œ2-å…¶å®ƒ
    "kzl22": "", //kzl21å…¶å®ƒ
    "kzl23": "0", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘å½“å‰å¥åº·æƒ…å†µï¼š0-æ­£å¸¸ï¼Œ1-æ— ç—‡çŠ¶æ„ŸæŸ“è€…ï¼Œ2-ç¡®è¯Šç—…ä¾‹
    "kzl24": "0", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘æ˜¯å¦éš”ç¦»ï¼š0-å¦ï¼Œ1-æ˜¯
    "kzl25": "", //éš”ç¦»åœºæ‰€0-åŒ»é™¢ï¼Œ1-é›†ä¸­éš”ç¦»ç‚¹ï¼Œ2-å®¶
    "kzl26": "", //éš”ç¦»è¯¦ç»†åœ°å€
    "kzl27": "", //éš”ç¦»å¼€å§‹æ—¶é—´ï¼Œyyyy-M-dd
    "kzl28": "0", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘æœ¬äººæˆ–å…±åŒå±…ä½çš„å®¶äººæ˜¯å¦ä¸ç¡®è¯Šç—…ä¾‹ã€æ— ç—‡çŠ¶æ„ŸæŸ“è€…ã€ç–‘ä¼¼ç—…ä¾‹è¡Œç¨‹è½¨è¿¹æœ‰äº¤é›†ï¼Œ0-å¦ï¼Œ1-æ˜¯
    "kzl29": "", //æ˜¯å¦ä¸ç¡®è¯Šç—…ä¾‹ã€æ— ç—‡çŠ¶æ„ŸæŸ“è€…ä¹˜ååŒæ¬¡èˆªç­å’Œåˆ—è½¦ï¼š0-å¦ï¼Œ1-æ˜¯
    "kzl30": "", //è¯¦ç»†è¯´æ˜
    "kzl31": "", //æœ¬äºº48å°æ—¶å†…æ˜¯å¦å·²è¿›è¡Œæ ¸é…¸æ£€æµ‹ï¼š0-å¦ï¼Œ1-æ˜¯
    "kzl32": "2", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘ç›®å‰æœ¬äººæ–°å† ç–«è‹—æ¥ç§æƒ…å†µï¼š0-æœªæ¥ç§ï¼Œ1-éƒ¨åˆ†æ¥ç§ï¼Œ2-å®Œå…¨æ¥ç§
    "kzl33": "", //å…¶å®ƒ
    "kzl34": {}, //kzl20å…¶å®ƒ
    "kzl38": "'''+province+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘=kzl6
    "kzl39": "'''+city+'''", //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘=kzl7
    "kzl40": "'''+district+'''" //ã€æ‰€æœ‰äººéœ€è¦å¡«å†™ã€‘=kzl8
}
'''
with open('post_data.jsonc','w',encoding='utf-8') as f:
    f.write(post_data)
print('å·²ç”Ÿæˆä¸ŠæŠ¥ä¿¡æ¯è‡³ï¼špost_data.jsoncï¼Œè¯·ä»”ç»†æ£€æŸ¥åå†ä½¿ç”¨ï¼')